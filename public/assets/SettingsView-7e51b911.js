import{ae,af as Ve,ag as Ce,ah as ne,ai as le,h as t,aj as we,ak as ke,al as pe,am as be,an as Pe,e as D,r as C,ao as Ie,ap as Re,aq as Be,O as w,ar as Fe,as as Se,at as Z,au as Ae,av as De,H as j,F as y,aw as ee,ax as Ne,ay as Te,az as Me,aA as Ue,R as q,aB as He,aC as Le,aD as Ee,d as U,o as u,c as i,w as l,aE as ze,l as J,t as b,K as _,aF as Ge,k as se,aG as Oe,aH as $e,a2 as r,W as je,aI as qe,V as k,q as oe,f as N,j as T,m as p,aJ as ue,s as M,aK as Je,aL as Ke,aM as We,n as te,aN as Qe,aO as Xe}from'./index-fe8b870b.js';const Ye=ae({start:Boolean,end:Boolean,...Ve(),...Ce()},'VListItemAction'),Ze=ne()({name:'VListItemAction',props:Ye(),setup(e,c){let{slots:a}=c;return le(()=>t(e.tag,{class:['v-list-item-action',{'v-list-item-action--start':e.start,'v-list-item-action--end':e.end},e.class],style:e.style},a)),{};}});var d=(e=>(e.Text='text',e.Number='number',e.Boolean='boolean',e.Password='password',e.Button='button',e.Url='url',e.Textarea='textarea',e))(d||{});const et=ae({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...we(),...ke()},'VTextarea'),tt=ne()({name:'VTextarea',directives:{Intersect:pe},inheritAttrs:!1,props:et(),emits:{'click:control':e=>!0,'mousedown:control':e=>!0,'update:focused':e=>!0,'update:modelValue':e=>!0},setup(e,c){let{attrs:a,emit:m,slots:s}=c;const o=be(e,'modelValue'),{isFocused:v,focus:H,blur:L}=Pe(e),P=D(()=>typeof e.counterValue=='function'?e.counterValue(o.value):(o.value||'').toString().length),I=D(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!='number'&&typeof e.counter!='string'))return e.counter;});function ie(n,f){!e.autofocus||!n||f[0].target?.focus?.();}const K=C(),R=C(),W=Ie(''),B=C(),ce=D(()=>e.persistentPlaceholder||v.value||e.active);function E(){B.value!==document.activeElement&&B.value?.focus(),v.value||H();}function de(n){E(),m('click:control',n);}function fe(n){m('mousedown:control',n);}function me(n){n.stopPropagation(),E(),q(()=>{o.value='',He(e['onClick:clear'],n);});}function ve(n){const f=n.target;if(o.value=f.value,e.modelModifiers?.trim){const x=[f.selectionStart,f.selectionEnd];q(()=>{f.selectionStart=x[0],f.selectionEnd=x[1];});}}const h=C(),F=C(+e.rows),z=D(()=>['plain','underlined'].includes(e.variant));Re(()=>{e.autoGrow||(F.value=+e.rows);});function V(){e.autoGrow&&q(()=>{if(!h.value||!R.value)return;const n=getComputedStyle(h.value),f=getComputedStyle(R.value.$el),x=parseFloat(n.getPropertyValue('--v-field-padding-top'))+parseFloat(n.getPropertyValue('--v-input-padding-top'))+parseFloat(n.getPropertyValue('--v-field-padding-bottom')),G=h.value.scrollHeight,A=parseFloat(n.lineHeight),O=Math.max(parseFloat(e.rows)*A+x,parseFloat(f.getPropertyValue('--v-input-control-height'))),$=parseFloat(e.maxRows)*A+x||1/0,g=Ee(G??0,O,$);F.value=Math.floor((g-x)/A),W.value=Le(g);});}Be(V),w(o,V),w(()=>e.rows,V),w(()=>e.maxRows,V),w(()=>e.density,V);let S;return w(h,n=>{n?(S=new ResizeObserver(V),S.observe(h.value)):S?.disconnect();}),Fe(()=>{S?.disconnect();}),le(()=>{const n=!!(s.counter||e.counter||e.counterValue),f=!!(n||s.details),[x,G]=Se(a),[{modelValue:A,...O}]=Z.filterProps(e),[$]=Ae(e);return t(Z,j({ref:K,modelValue:o.value,'onUpdate:modelValue':g=>o.value=g,class:['v-textarea v-text-field',{'v-textarea--prefixed':e.prefix,'v-textarea--suffixed':e.suffix,'v-text-field--prefixed':e.prefix,'v-text-field--suffixed':e.suffix,'v-textarea--auto-grow':e.autoGrow,'v-textarea--no-resize':e.noResize||e.autoGrow,'v-text-field--plain-underlined':z.value},e.class],style:e.style},x,O,{centerAffix:F.value===1&&!z.value,focused:v.value}),{...s,default:g=>{let{isDisabled:Q,isDirty:X,isReadonly:xe,isValid:ge}=g;return t(De,j({ref:R,style:{'--v-textarea-control-height':W.value},onClick:de,onMousedown:fe,'onClick:clear':me,'onClick:prependInner':e['onClick:prependInner'],'onClick:appendInner':e['onClick:appendInner']},$,{active:ce.value||X.value,centerAffix:F.value===1&&!z.value,dirty:X.value||e.dirty,disabled:Q.value,focused:v.value,error:ge.value===!1}),{...s,default:_e=>{let{props:{class:Y,...ye}}=_e;return t(y,null,[e.prefix&&t('span',{class:'v-text-field__prefix'},[e.prefix]),ee(t('textarea',j({ref:B,class:Y,value:o.value,onInput:ve,autofocus:e.autofocus,readonly:xe.value,disabled:Q.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:E,onBlur:L},ye,G),null),[[Ne('intersect'),{handler:ie},null,{once:!0}]]),e.autoGrow&&ee(t('textarea',{class:[Y,'v-textarea__sizer'],'onUpdate:modelValue':he=>o.value=he,ref:h,readonly:!0,'aria-hidden':'true'},null),[[Te,o.value]]),e.suffix&&t('span',{class:'v-text-field__suffix'},[e.suffix])]);}});},details:f?g=>t(y,null,[s.details?.(g),n&&t(y,null,[t('span',null,null),t(Me,{active:e.persistentCounter||v.value,value:P.value,max:I.value},s.counter)])]):void 0});}),Ue({},K,R,B);}}),re=U({__name:'SettingEdit',props:{setting:{}},emits:['onChange'],setup(e,{emit:c}){const a=e,m=s=>{c('onChange',a.setting.id,s);};return(s,o)=>(u(),i($e,null,{default:l(()=>[t(ze,null,{default:l(()=>[J(b(a.setting.label??a.setting.name),1)]),_:1}),t(Ze,null,{default:l(()=>[_(d).Boolean===a.setting.type?(u(),i(Ge,{key:0,'model-value':a.setting.value,'onUpdate:modelValue':m},null,8,['model-value'])):_(d).Button===a.setting.type?(u(),i(se,{key:1,class:'mt-4',onClick:a.setting.action},{default:l(()=>[J(b(a.setting.name),1)]),_:1},8,['onClick'])):_(d).Textarea===a.setting.type?(u(),i(tt,{key:2,'model-value':a.setting.value,'onUpdate:modelValue':m},null,8,['model-value'])):(u(),i(Oe,{key:3,'model-value':a.setting.value,type:a.setting.type,autocomplete:'off','onUpdate:modelValue':m},null,8,['model-value','type']))]),_:1})]),_:1}));}}),at={general:{},sync:{title:r('Sync'),database:{title:r('Remote CouchDB credentials'),settings:[{id:'databaseRemotePath',name:r('Remote CouchDB url'),type:d.Url},{id:'databaseRemoteUsername',name:r('Remote CouchDB username'),type:d.Text},{id:'databaseRemotePassword',name:r('Remote CouchDB password'),type:d.Password}]},calendar:{title:r('Calendar'),settings:[{id:'calendarSyncInterval',name:r('Calendar sync interval'),type:d.Number,defaultValue:je.calendar.syncIntervalMinutes},{id:'calendarIcalUrls',name:r('Calendar iCal urls (one per line)'),type:d.Textarea}]}}},nt=e=>({id:'',name:'',value:'',type:d.Text,...e}),lt=U({__name:'SettingsDevelopmentMode',setup(e){const c=()=>Je(Ke),a=[{id:'reParseAllDocuments',label:r('Recalculate all documents'),name:r('Recalculate'),action:qe,type:d.Button},{id:'removeAllIndexes',label:r('Remove all indexes'),name:r('Remove'),action:c,type:d.Button}];return(m,s)=>(u(),i(p,null,{default:l(()=>[t(k,{cols:'12'},{default:l(()=>[oe('h2',null,b(_(r)('Debug')),1)]),_:1}),t(k,{cols:'12'},{default:l(()=>[(u(),N(y,null,T(a,o=>t(p,{key:o.id},{default:l(()=>[t(ue,{class:'d-flex flex-column'},{default:l(()=>[t(re,{setting:o},null,8,['setting'])]),_:2},1024)]),_:2},1024)),64)),t(M)]),_:1}),t(M)]),_:1}));}}),st=U({__name:'Settings',setup(e){const c=We(),a=(s,o)=>{c.update(s,o);},m=s=>nt({...s,value:c.settings[s.id]??s.defaultValue});return(s,o)=>(u(),i(Xe,{class:'settings'},{default:l(()=>[(u(!0),N(y,null,T(_(at),(v,H)=>(u(),i(p,{key:H},{default:l(()=>[t(k,{cols:'12'},{default:l(()=>[oe('h2',null,b(v.title),1)]),_:2},1024),t(k,{cols:'12'},{default:l(()=>[(u(!0),N(y,null,T(v,(L,P)=>(u(),i(p,{key:P},{default:l(()=>[P!=='title'?(u(),i(ue,{key:0,class:'d-flex flex-column'},{default:l(()=>[(u(!0),N(y,null,T(L.settings,I=>(u(),i(re,{key:I.id,setting:m(I),onOnChange:a},null,8,['setting']))),128))]),_:2},1024)):te('',!0)]),_:2},1024))),128)),t(M)]),_:2},1024),t(M)]),_:2},1024))),128)),_(Qe).environment.development?(u(),i(lt,{key:0})):te('',!0),t(p,{class:'mt-12'},{default:l(()=>[t(k,{cols:'12'},{default:l(()=>[t(se,{color:'primary',onClick:_(c).save},{default:l(()=>[J(b(_(r)('Save')),1)]),_:1},8,['onClick'])]),_:1})]),_:1})]),_:1}));}});const ut=U({__name:'SettingsView',setup(e){return(c,a)=>(u(),i(st));}});export{ut as default};
